{"version":3,"sources":["../../config/passport.js"],"names":["JwtStrategy","require","Strategy","ExtractJwt","User","config","module","exports","passport","opts","jwtFromRequest","fromAuthHeaderAsBearerToken","secretOrKey","opt","secret","use","jwt_payload","done","findOne","id","err","user"],"mappings":";;AAAA,IAAIA,cAAsBC,QAAQ,cAAR,EAAwBC,QAAlD;AACA,IAAIC,aAAsBF,QAAQ,cAAR,EAAwBE,UAAlD;AACA,IAAIC,OAAsBH,QAAQ,qBAAR,CAA1B;AACA,IAAII,SAAsBJ,QAAQ,UAAR,CAA1B;;AAEAK,OAAOC,OAAP,GAAiB,UAASC,QAAT,EAAmB;;AAEhC,QAAIC,OAAO,EAAX;AACAA,SAAKC,cAAL,GAAsBP,WAAWQ,2BAAX,EAAtB;AACAF,SAAKG,WAAL,GAAmBP,OAAOQ,GAAP,CAAWC,MAA9B;AACAN,aAASO,GAAT,CAAa,IAAIf,WAAJ,CAAgBS,IAAhB,EAAsB,UAASO,WAAT,EAAsBC,IAAtB,EAA4B;AAC3Db,aAAKc,OAAL,CAAa,EAACC,IAAIH,YAAYG,EAAjB,EAAb,EAAmC,UAASC,GAAT,EAAcC,IAAd,EAAoB;AACnD,gBAAID,GAAJ,EAAS;AACL,uBAAOH,KAAKG,GAAL,EAAU,KAAV,CAAP;AACH;AACD,gBAAIC,IAAJ,EAAU;AACNJ,qBAAK,IAAL,EAAWI,IAAX;AACH,aAFD,MAEO;AACHJ,qBAAK,IAAL,EAAW,KAAX;AACH;AACJ,SATD;AAUH,KAXY,CAAb;AAYH,CAjBD","file":"passport.js","sourcesContent":["var JwtStrategy         = require('passport-jwt').Strategy;\nvar ExtractJwt          = require('passport-jwt').ExtractJwt;\nvar User                = require('../models/userModel');\nvar config              = require('./config');\n\nmodule.exports = function(passport) {\n    \n    var opts = {};\n    opts.jwtFromRequest = ExtractJwt.fromAuthHeaderAsBearerToken();\n    opts.secretOrKey = config.opt.secret;\n    passport.use(new JwtStrategy(opts, function(jwt_payload, done) {\n        User.findOne({id: jwt_payload.id}, function(err, user) {\n            if (err) {\n                return done(err, false);\n            }\n            if (user) {\n                done(null, user);\n            } else {\n                done(null, false);\n            }\n        });\n    }));\n};\n"]}